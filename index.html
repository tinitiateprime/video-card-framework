<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Card Video Framework</title>

    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Markdown parser (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <link rel="stylesheet" href="./src/styles.css" />
  </head>

  <body class="min-h-screen bg-slate-950 text-slate-100">
    <header class="sticky top-0 z-50 border-b border-white/10 bg-slate-950/80 backdrop-blur">
      <div class="mx-auto flex max-w-6xl flex-wrap items-center justify-between gap-3 px-4 py-3">
        <div class="flex items-center gap-3">
          <div class="h-9 w-9 rounded-xl bg-white/10 grid place-items-center">üé¨</div>
          <div>
            <div class="font-semibold leading-tight">Card Video Framework</div>
            <div class="text-xs text-slate-400">Markdown ‚Üí full-screen cards (Reels/Shorts/YouTube)</div>
          </div>
        </div>

        <div class="flex flex-wrap items-center gap-2">
          <label class="text-xs text-slate-300">Format</label>
          <select
            id="formatSelect"
            class="rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-white/20"
          ></select>

          <label class="text-xs text-slate-300">Direction</label>
          <select
            id="transitionDir"
            class="rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-white/20"
          >
            <option value="auto">Auto (match format)</option>
            <option value="td">Top ‚Üí Down</option>
            <option value="bu">Bottom ‚Üí Up</option>
            <option value="lr">Left ‚Üí Right</option>
            <option value="rl">Right ‚Üí Left</option>
          </select>

          <label class="text-xs text-slate-300">Effect</label>
          <select
            id="transitionFx"
            class="rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-white/20"
          >
            <option value="none">None</option>
            <option value="zoomIn">Zoom In</option>
            <option value="zoomOut">Zoom Out</option>
          </select>

          <button
            id="playBtn"
            class="rounded-lg bg-white/10 px-3 py-2 text-sm hover:bg-white/15 active:bg-white/20"
          >
            ‚ñ∂ Play
          </button>
          <button
            id="pauseBtn"
            class="rounded-lg bg-white/10 px-3 py-2 text-sm hover:bg-white/15 active:bg-white/20"
          >
            ‚è∏ Pause
          </button>
          <button
            id="restartBtn"
            class="rounded-lg bg-white/10 px-3 py-2 text-sm hover:bg-white/15 active:bg-white/20"
          >
            ‚Ü∫ Restart
          </button>

          <!-- ‚úÖ Export UI -->
          <input
            id="exportName"
            placeholder="my-video.mp4 (optional)"
            class="w-44 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-white/20"
          />
          <button
            id="exportMp4Btn"
            class="rounded-lg bg-emerald-500/20 px-3 py-2 text-sm hover:bg-emerald-500/25 active:bg-emerald-500/30 border border-emerald-500/30"
          >
            ‚¨á Export MP4
          </button>
        </div>
      </div>

      <div class="mx-auto max-w-6xl px-4 pb-3 flex items-center justify-between gap-4">
        <div id="formatInfo" class="text-xs text-slate-400"></div>
        <div id="exportStatus" class="text-xs text-slate-400"></div>
      </div>
    </header>

    <main class="mx-auto grid max-w-6xl grid-cols-1 gap-4 px-4 py-4 lg:grid-cols-12">
      <section class="lg:col-span-5">
        <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
          <div class="flex items-center justify-between gap-2">
            <div>
              <div class="font-semibold">Markdown Slides</div>
              <div class="text-xs text-slate-400">One Markdown file per card</div>
            </div>
            <div class="text-xs text-slate-400"><span id="countInfo">0 slides</span></div>
          </div>

          <div class="mt-3 flex flex-wrap gap-2" id="slideTabs"></div>

          <div class="mt-3">
            <label class="text-xs text-slate-400">Selected slide markdown</label>
            <textarea
              id="mdEditor"
              class="mt-2 h-72 w-full rounded-xl border border-white/10 bg-slate-950/60 p-3 font-mono text-xs leading-relaxed outline-none focus:ring-2 focus:ring-white/20"
              spellcheck="false"
            ></textarea>

            <div
              id="limitWarning"
              class="mt-3 hidden rounded-xl border border-amber-500/30 bg-amber-500/10 p-3 text-sm text-amber-200"
            ></div>
          </div>
        </div>
      </section>

      <section class="lg:col-span-7">
        <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
          <div class="flex items-center justify-between gap-2">
            <div>
              <div class="font-semibold">Preview</div>
              <div class="text-xs text-slate-400">Snap-scroll like Reels/Shorts/YouTube slides</div>
            </div>
            <div class="text-xs text-slate-400"><span id="slidePos">Slide 1 / 1</span></div>
          </div>

          <div class="mt-3 w-full overflow-hidden">
            <div id="frameOuter" class="flex w-full justify-center overflow-hidden">
              <div class="max-w-full rounded-2xl border border-white/10 bg-slate-950/60 p-3 overflow-hidden">
                <div id="frame" class="relative overflow-hidden rounded-xl">
                  <div id="deck" class="no-scrollbar h-full w-full"></div>
                  <div class="pointer-events-none absolute inset-0 shadow-[inset_0_0_90px_rgba(0,0,0,0.65)]"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-3 text-xs text-slate-400">
            Tip: run using a local server (like Node server.js) to load Markdown files.
          </div>
        </div>
      </section>
    </main>

    <script src="./src/app.js"></script>
  </body>
</html>
